<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Data.administracion.actividad">

  <cache />
  
  
<select id="getNextCodigo" resultType="java.lang.String">
	select max(IdSede) from SEDE	
</select>
  
<select id="searchPlantillaActividad" parameterType="IngSoft.administracion.bean.CriterioActividadBeanData" resultType="IngSoft.administracion.bean.ResultadoActividadBeanData">



SELECT 
ACTIVIDAD.IdActividad AS codigo,
ACTIVIDAD.nombre as nombre,
TIPO_ACTIVIDAD.nombre as tipoactividad,
TIPO_ACTIVIDAD.nombre as tipoactividad
FROM
TIPO_ACTIVIDAD , ACTIVIDAD ,  AMBIENTE ,   
SEDE ,            EMPLEADO ,   PERSONA 


WHERE

    ACTIVIDAD.IdSede    = AMBIENTE.IdSede 
AND AMBIENTE.IdSede     = SEDE.IdSede 
AND SEDE.IdSede         = EMPLEADO.IdSede 
AND EMPLEADO.IdEmpleado = PERSONA.IdPersona 

AND ACTIVIDAD.IdEmpleado =  EMPLEADO.IdEmpleado
AND ACTIVIDAD.IdTipoActividad = TIPO_ACTIVIDAD.IdTipoActividad 
AND ACTIVIDAD.IdAmbiente =  AMBIENTE.IdAmbiente

ORDER BY 1 ASC
;


</select>


<select id="getPLantillaActividad" parameterType="java.lang.String"  resultType="IngSoft.administracion.bean.ActividadBeanData">
select 
SEDE.IdSede as codigo
,SEDE.NOMBRE as nombre
,SEDE.DIRECCION as direccion
,SEDE.TELEFONO as telefono
,SEDE.AREATERRENO as areaterreno
,SEDE.ESTADO as estado
,DEPARTAMENTO.NOMBRE as departamento
,PROVINCIA.NOMBRE as provincia
,DISTRITO.NOMBRE as distrito
from DEPARTAMENTO  , PROVINCIA  , DISTRITO  , SEDE 
WHERE
        SEDE.IdSede = #{codigo}
        AND  DEPARTAMENTO.IdDepartamento = PROVINCIA.IdDepartamento 
        AND  PROVINCIA.IdProvincia = DISTRITO.IdProvincia 
        AND  DISTRITO.IdDistrito = SEDE.IdDistrito

order by 1 asc
</select>








<!-- tipoactividad  -->
<select id="getTipoactividad" resultType="IngSoft.administracion.bean.TipoActividadMiniBeanData">
select TIPO_AMBIENTE.IdTipoAmbiente as codigo
, TIPO_AMBIENTE.Nombre as nombre
from 
TIPO_AMBIENTE; 

</select>



</mapper>