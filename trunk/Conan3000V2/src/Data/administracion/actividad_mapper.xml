<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Data.administracion.actividad">

  <cache />
  
  
<select id="getNextCodigo" resultType="java.lang.String">
	select max(IdActividad) from ACTIVIDAD	
</select>
  
<select id="searchPlantillaActividad" parameterType="IngSoft.administracion.bean.CriterioActividadBeanData" resultType="IngSoft.administracion.bean.ResultadoActividadBeanData">



SELECT 
inf245g2.ACTIVIDAD.IdActividad AS codigo ,
inf245g2.ACTIVIDAD.nombre as nombre,
inf245g2.TIPO_ACTIVIDAD.nombre as tipoactividad,
inf245g2.ACTIVIDAD.estado as estado


FROM inf245g2.ACTIVIDAD , inf245g2.TIPO_ACTIVIDAD 


WHERE

inf245g2.ACTIVIDAD.IdTipoActividad = inf245g2.TIPO_ACTIVIDAD.IdTipoActividad

AND inf245g2.ACTIVIDAD.nombre  like  #{nombre}


ORDER BY 1 ASC
;


</select>


<select id="getPLantillaActividad" parameterType="java.lang.String"  resultType="IngSoft.administracion.bean.ActividadBeanData">


SELECT 
inf245g2.ACTIVIDAD.IdActividad AS codigo ,
inf245g2.ACTIVIDAD.IdSede AS nombreSede,
inf245g2.ACTIVIDAD.nombre as nombre,
inf245g2.ACTIVIDAD.IdTipoActividad as nombreTipoactividad,


inf245g2.ACTIVIDAD.IdEmpleado AS nombreEncargado,
inf245g2.ACTIVIDAD.IdAmbiente as nombreAmbientes,


inf245g2.ACTIVIDAD.FechaInicio AS fechaInicio,
inf245g2.ACTIVIDAD.FechaFin as fechaFin,
inf245g2.ACTIVIDAD.Descripcion as descripcion,
inf245g2.ACTIVIDAD.estado as estado


FROM inf245g2.ACTIVIDAD 



WHERE
    inf245g2.ACTIVIDAD.IdActividad    = #{codigo}


ORDER BY 1 ASC


</select>

<!-- Agregar plantilla ACTIVIDAD -->

<insert id="insertPlantillaActividad" parameterType="IngSoft.administracion.bean.ActividadBeanData" flushCache="true">
	insert into ACTIVIDAD (IdActividad,IdSede,Nombre,IdEmpleado,IdAmbiente,FechaInicio,FechaFin,Descripcion,IdTipoActividad,Estado)
	values (#{codigo},#{nombreSede},#{nombre},#{nombreEncargado},#{nombreAmbientes},#{fechaInicio},#{fechaFin},#{descripcion},#{nombreTipoactividad},#{estado})
</insert>


<!--Modificar sede -->

<update id="modificarPlantillaActividad" parameterType="IngSoft.administracion.bean.ActividadBeanData" >
update ACTIVIDAD 
set
IdSede	=	#{nombreSede} ,
Nombre	=	#{nombre} ,
IdEmpleado	=	#{nombreEncargado} ,
IdAmbiente	=	#{nombreAmbientes} ,
FechaInicio	=	#{fechaInicio} ,
FechaFin	=	#{fechaFin} ,
Descripcion	=	#{descripcion} ,
IdTipoActividad	=	#{nombreTipoactividad},
estado	=	#{estado}

where IdActividad= #{codigo}
</update>
<!-- Fin eliminar -->

<!--Eliminar sede -->

<update id="deletePLantillaActividad" parameterType="java.lang.String" >
update ACTIVIDAD set Estado ='No Disponible' where IdActividad = #{codigo}
</update>
<!-- Fin eliminar -->




<!-- tipoactividad  -->
<select id="getTipoactividad" resultType="IngSoft.administracion.bean.TipoActividadMiniBeanData">
select TIPO_ACTIVIDAD.IdTipoActividad as codigo
, TIPO_ACTIVIDAD.Nombre as nombre
from 
TIPO_ACTIVIDAD; 

</select>


<!-- sedes  -->
<select id="getSede" resultType="IngSoft.administracion.bean.SedeBeanData">
select SEDE.IdSede as codigo
, SEDE.Nombre as nombre
from 
SEDE; 

</select>

<!-- ambientes  -->
<select id="getAmbiente" resultType="IngSoft.administracion.bean.AmbienteBeanData">
select AMBIENTE.IdAmbiente as codigo
, AMBIENTE.Nombre as nombre
from 
AMBIENTE; 

</select>

</mapper>