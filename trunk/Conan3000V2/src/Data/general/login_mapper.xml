<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Data.general.login">

  <cache />

<select id="getUsuarioLogin" parameterType="String" resultType="String">
select NombreUsuario from USUARIO where NombreUsuario = #{user};
</select>

<select id="getUsuarioBeanData" parameterType="IngSoft.general.bean.UsuarioBeanData" resultType="IngSoft.general.bean.UsuarioBeanData">
select 	NombreUsuario as nombUsuario,
		Password as password		 
from USUARIO U where U.NombreUsuario=#{nombUsuario} and U.Password = #{password};
</select>

<select id="getPassLogin" parameterType="String" resultType="String">
select Password from USUARIO where Password = #{pass};
</select>

<select id="getPerfilUsuario" parameterType="IngSoft.general.bean.UsuarioBeanData" resultType="String">
select IdPerfil from USUARIO U where U.Password = #{password} and U.NombreUsuario=#{nombUsuario};
</select>

<select id="getIdSocio" parameterType="IngSoft.general.bean.UsuarioBeanData" resultType="java.lang.String">
select IdSocio from USUARIO where Password = #{password} and NombreUsuario=#{nombUsuario};
</select>
<select id="getIdEmp" parameterType="IngSoft.general.bean.UsuarioBeanData" resultType="java.lang.String">
select IdEmpleado from USUARIO where Password = #{password} and NombreUsuario=#{nombUsuario};
</select>

<select id="getCasosDeUso" parameterType="java.lang.String" resultType="IngSoft.general.bean.PerfilBeanData">
select 	ACUP.IdPerfil as idPerfil,
		A.Nombre idAccion,
		CU.Nombre idCasoUso,
		case 	when CU.Nombre like 'SMS%' then 'SERVICIO'
				when CU.Nombre like 'SMA%' then 'ADMINISTRACION'
				when CU.Nombre like 'SMV%' then 'VENTA'
				when CU.Nombre like 'GEN%' then 'LOGIN'
				when CU.Nombre like 'SMC%' then 'SOCIO'
		END as mantenimiento
from 	inf245g2.ACCIONxCASO_USOxPERFIL ACUP
		left join inf245g2.CASO_USO CU on (ACUP.IdCasoUso = CU.IdCasoUso)
		left join inf245g2.ACCION A on (ACUP.IdAccion=A.IdAccion)
where ACUP.IdPerfil=#{perfil}
order by 4,3;

</select>
<select id="getNombrePerfil" parameterType="java.lang.String" resultType="java.lang.String">
	select Nombre from PERFIL where IdPerfil = #{perfil}
</select>

</mapper>