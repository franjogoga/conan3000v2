<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Data.administracion.empleado">

  <cache />

  <select id="searchPlantillaEmpleado" parameterType="IngSoft.administracion.bean.CriterioEmpleadoBeanData" resultType="IngSoft.administracion.bean.ResultadoEmpleadoBeanData">

SELECT
inf245g2.PERSONA.IdPersona AS codigo ,
inf245g2.PERSONA.Nombres AS nombre,
inf245g2.PERSONA.ApePaterno AS apaterno,
inf245g2.EMPLEADO.Puesto AS puesto,
inf245g2.EMPLEADO.Estado AS estado

FROM inf245g2.PERSONA , inf245g2.EMPLEADO
WHERE 
inf245g2.PERSONA.IdPersona = inf245g2.EMPLEADO.IdEmpleado

order by 1 asc;
</select>
<select id="searchHorarios" resultType="IngSoft.administracion.bean.HorarioEmpleados">
	select IdHorario as codigo
	,Descripcion 
	from 
	HORARIO
	order by 1
</select>
<select id="searchAmbienteMini" resultType="IngSoft.servicio.bean.AmbienteMiniBeanData">
	select IdTipoAmbiente as codigo
	,Nombre 
	from 
	TIPO_AMBIENTE 
	order by 1
</select>
  
  
<select id="searchHorarios" resultType="IngSoft.administracion.bean.HorarioEmpleados">
	select IdHorario as codigo
	,Descripcion 
	from 
	HORARIO
	order by 1
	
</select>


<select id="getNextCodigo" resultType="java.lang.String">
	select max(IdEmpleado) from EMPLEADO	
</select>

<!-- inserts -->

<insert id="insertPlantillaEmpleado" parameterType="IngSoft.administracion.bean.EmpleadoBeanData"
	flushCache="true">
	insert into
	EMPLEADO(IdSede,IdEmpleado,IdHorario,fechaContrato,Puesto,Area,Estado,CodigoEmpleado)
	values (
	<foreach item="idSede" index="i" collection="idSede" separator="),(#{codigo},"
		close=")">
		#{idSede}
	</foreach>
	,#{codigo},

	<foreach item="idHorario" index="i" collection="idHorario"
		separator="),(#{codigo}," close=")">
		#{idSede}
	</foreach>
	,#{fechaContrato},#{puesto},#{area},'activo',#{codigo})
</insert>



<insert id="insertPlantillaPersona" parameterType="IngSoft.administracion.bean.EmpleadoBeanData" flushCache="true">
	insert into PERSONA (IdPersona ,Nombres ,ApePaterno  ,ApeMaterno  ,TipoDocumento  ,NumeroDocumento  ,FechaNac )
	values (#{codigo},#{nombre},#{apellidoPaterno},#{apellidoMaterno},#{tipoDocumento},#{numeroDocumento},#{fechaNacimiento})
</insert>




<!-- fin inserts -->


</mapper>