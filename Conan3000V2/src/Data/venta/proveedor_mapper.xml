<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Data.venta.proveedor">

  <cache />




  
<!-- Agregar plantilla socio -->
<insert id="insertProveedor" parameterType="IngSoft.venta.bean.ProveedorBeanData" flushCache="true">
	insert into PROVEEDOR(IdProveedor,RazonSocial,Ruc,Direccion,Telefono,Correo,NombresContacto,ApePaternoContacto,ApeMaternoContacto,TipoDocumentoContacto,NumeroDocumentoContacto,Estado,IdDistrito)
	values (#{idProveedor},#{razonSocial},#{ruc},#{direccion},#{telefono},#{correo},#{nomContacto},#{apPaterno},#{apMaterno},#{tipoDoc},#{numDoc},'Activo',#{distrito})
</insert>


<select id="getNextCodigo4" resultType="java.lang.String">
	select max(IdProveedor) from PROVEEDOR
</select>

<select id="searchDistritoMini" resultType="IngSoft.venta.bean.DistritoMiniBeanData">
	select IdDistrito as idDistrito
	,Nombre as nombreDistrito
	from 
	DISTRITO
</select>

<!-- departamento,provincia y distrito   -->
<select id="getDepartamentos" resultType="IngSoft.administracion.bean.DepartamentoBeanData">
select IdDepartamento as codigo
, Nombre as nombre
from 
DEPARTAMENTO; 

</select>


<select id="getProvincias" parameterType="java.lang.String" resultType="IngSoft.administracion.bean.ProvinciaBeanData">
select IdProvincia as codigo
, Nombre as nombre
from 
PROVINCIA
where
idDepartamento like  #{codigo}  
</select>


 <!-- Fin agregar  -->
 
 <select id="searchPlantillaProveedor" parameterType="IngSoft.venta.bean.CriterioProveedorBeanData" resultType="IngSoft.venta.bean.ResultadoProveedorBeanData">
select 
PROVEEDOR.IdProveedor as codigo
,PROVEEDOR.RazonSocial as RazonSocial		
,PROVEEDOR.Ruc as ruc
,PROVEEDOR.Correo as correo
,PROVEEDOR.NombresContacto as nombre

from PROVEEDOR 
<where>
	<if test="RazonSocial != null ">
       PROVEEDOR.RazonSocial  like  #{RazonSocial}
    </if>
    <if test="Ruc != null">
        AND PROVEEDOR.Ruc like = #{Ruc}
    </if>
    <if test="correo != null">
        AND PROVEEDOR.Correo like= #{correo}
    </if>
    <if test="nombre != null">
        AND PROVEEDOR.NombresContacto like #{nombre}
    </if>
      
</where>
</select>
 
 <!-- 
 <select id="getPlantillaProveedor" parameterType="java.lang.String"  resultType="IngSoft.venta.bean.ProveedorBeanData">
select   
IdProveedor as codigo
,RazonSocial as razon
,Ruc as ruc
,Direccion as dir
,Telefono as tel
,Correo as correo
,NombresContacto as nombre
from PROVEEDOR  where IdProveedor=#{codigo}; 
</select> 
   -->
  
  
  <!-- Modificar elemento -->
<update id="updateProveedor" parameterType="IngSoft.venta.bean.ProveedorBeanData">
update PROVEEDOR set IdProveedor=#{codigo}
 ,RazonSocial=#{fechaInicio}
 ,Ruc=#{fechaFin}
 ,Direccion=#{dir}
 ,Correo=#{correo}
 ,NombresContacto=#{nombre}
 where IdPromocion= #{codigo}
</update>

<!-- Fin modificar -->



<!--Eliminar promocion -->
<update id="deleteProveedor" parameterType="java.lang.String" >
update PROVEEDOR set Estado='Inactivo' where IdProveedor= #{codigo}
</update>
<!-- Fin eliminar -->

<select id="getPlantillaProveedor" parameterType="java.lang.String"  resultType="IngSoft.venta.bean.ProveedorBeanData">
select 
IdProveedor as codigo
,RazonSocial as razon
,Ruc as ruc
,Direccion as dir
,Telefono as tel
,Correo as correo
,NombresContacto as nombre

,Estado as estado
from PROVEEDOR  where IdProveedor=#{codigo}; 


</select>
 
 
 
</mapper>
 
 