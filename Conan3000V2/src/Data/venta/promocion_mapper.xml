<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Data.venta.promocion">

  <cache />

<select id="searchPlantillaPromocion" parameterType="IngSoft.venta.bean.CriterioPromocionBeanData" resultType="IngSoft.venta.bean.ResultadoPromocionBeanData">
select 
PROMOCION.IdPromocion as codigo
,PROMOCION.FechaInicio as limInicio
,PROMOCION.FechaFin as limFin
,PROMOCION.Nombre as nombre
,PROMOCION.Estado as estado
,PROMOCION.Descripcion as descripcion
from PROMOCION 
<where>
	<if test="nombre != null ">
        PROMOCION.nombre  like  #{nombre}
    </if>
    <if test="limInicio != null">
        AND PROMOCION.FechaInicio &gt;= #{limInicio}
    </if>
    <if test="limFin != null">
        AND PROMOCION.FechaFin &lt;= #{limFin}
    </if>
</where>
</select>

  
<!-- Agregar plantilla promocion -->
<insert id="insertPromocion" parameterType="IngSoft.venta.bean.PromocionBeanData" flushCache="true">
	insert into PROMOCION(IdPromocion,Nombre,FechaInicio,FechaFin,Descripcion,Estado)
	values (#{codigo},#{nombre},#{fechaInicio},#{fechaFin},#{descripcion},'activo')
</insert>

<select id="getNextCodigo2" resultType="java.lang.String">
	select max(IdPromocion) from PROMOCION
</select>


 <!-- Fin agregar  -->
 
 <!-- Modificar elemento -->
<update id="updatePromocion" parameterType="IngSoft.venta.bean.PromocionBeanData">
update Promocion set Nombre=#{nombre}
 ,FechaInicio=#{fechaInicio}
 ,FechaFin=#{fechaFin}
 ,Descripcion=#{descripcion}
 ,Estado=#{estado]
 where IdPromocion= #{codigo}
</update>

<!-- Fin modificar -->

 
 


<!--Eliminar promocion -->
<update id="deletePromocion" parameterType="java.lang.String" >
update PROMOCION set Estado='Inactivo' where IdPromocion= #{codigo}
</update>
<!-- Fin eliminar -->

<select id="getPLantillaPromocion" parameterType="java.lang.String"  resultType="IngSoft.venta.bean.PromocionBeanData">
select 
IdPromocion as codigo
,Nombre as nombre
,FechaInicio as limiteInicio
,FechaFin as limiteFin
,Descripcion as descripcion
,Estado as estado
from PROMOCION pe  where pe.Estado='activo' and  pe.IdPromocion=#{codigo}; 
</select>




</mapper>
 
